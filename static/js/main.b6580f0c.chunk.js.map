{"version":3,"sources":["Canvas.js","Cell.js","Col.js","FirstCol.js","LastCol.js","App.js","index.js"],"names":["Canvas","props","useState","isCalculated","setCalculated","isDrawing","setDrawing","timeoutId","setTimeoutId","text","setText","canvasRef","useRef","isDrawingRef","current","clear","ocr","canvas","recognize","drawing","then","data","clearText","writeText","onChange","toInt","image","langs","options","a","worker","Tesseract","createWorker","load","loadLanguage","initialize","setParameters","tessedit_char_whitelist","value","free","finally","terminate","replace","trim","ctx","Object","assign","getContext","font","textBaseline","txtWidth","measureText","width","fillText","height","isNaN","parseInt","clearTimer","clearTimeout","onClick","onMove","style","onTouchMove","onMouseMove","onMouseDown","onTouchStart","className","ref","position","top","opacity","setTimeout","hideInterface","immediateLoading","canvasWidth","canvasHeight","lazyRadius","hideGrid","brushRadius","Cell","size","centerContent","CenterType","HorizontalVertical","borderRight","borderBottom","trackSize","children","type","as","lineHeight","Col","setName","Array","fill","numRows","setNumRows","numRows2","setNumRows2","useEffect","setScore","reduce","b","isWinner","color","marginTop","marginLeft","n","keys","map","i","num","i2","FirstCol","borderLeft","fontFamily","App","name","score","players","setPlayers","key","p","pi","Math","max","rootElement","document","getElementById","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.b6580f0c.chunk.js","sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\r\nimport CanvasDraw from \"react-canvas-draw\";\r\nimport Tesseract from \"tesseract.js\";\r\n\r\nexport default function Canvas(props) {\r\n  const [isCalculated, setCalculated] = useState(false);\r\n  const [isDrawing, setDrawing] = useState(false);\r\n  const [timeoutId, setTimeoutId] = useState();\r\n  const [text, setText] = useState(\"\");\r\n  const canvasRef = useRef(null);\r\n\r\n  const isDrawingRef = useRef(isDrawing);\r\n  isDrawingRef.current = isDrawing;\r\n\r\n  let clear = () => {\r\n    canvasRef.current && canvasRef.current.clear();\r\n    setCalculated(false);\r\n  };\r\n\r\n  let ocr = () => {\r\n    let canvas = canvasRef.current && canvasRef.current.canvas;\r\n    recognize(canvas.drawing).then(({ data }) => {\r\n      if(!isDrawingRef.current){\r\n        let text = clearText(data.text)\r\n        writeText(text)      \r\n        setCalculated(true);\r\n        setText(text)\r\n        if (props.onChange) {\r\n          props.onChange(toInt(text));\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  let recognize = async (image, langs, options) => {\r\n    const worker = Tesseract.createWorker(options);\r\n    await worker.load();\r\n    await worker.loadLanguage(langs);\r\n    await worker.initialize(langs);\r\n    await worker.setParameters({\r\n      tessedit_char_whitelist: props.value \r\n        ? \"VX/\\\\\" \r\n        : props.free \r\n          ? \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\"\r\n          : \"0123456789/\\\\\"\r\n    });\r\n    return worker.recognize(image).finally(async () => {\r\n      await worker.terminate();\r\n    });\r\n  };\r\n\r\n  let clearText = (text) => {\r\n    if(props.free) return text\r\n    return text\r\n      .replace(\"V\", props.value)\r\n      .replace(\"/\", 0)\r\n      .replace(\"\\\\\", 0)\r\n      .replace(\"X\", props.value)\r\n      .trim();\r\n  }\r\n  \r\n  let writeText = (text) => {\r\n    clear();\r\n    let canvas = canvasRef.current.canvas.drawing;\r\n    let ctx = Object.assign(canvas.getContext(\"2d\"), {\r\n      font: \"30px sans-serif\",\r\n      textBaseline: \"middle\"\r\n    });\r\n    let txtWidth = ctx.measureText(text).width\r\n    ctx.fillText(text, (canvas.width/2)-(txtWidth/2), canvas.height / 2);\r\n  }\r\n\r\n  let toInt = (text) => {\r\n    return isNaN(parseInt(text)) ? 0 : parseInt(text)\r\n  }\r\n\r\n  let onChange = () => {\r\n    setDrawing(false)\r\n    clearTimer();\r\n    setTimeoutId(setTimeout(ocr, 400));    \r\n  };\r\n\r\n  let clearTimer = () => {\r\n    clearTimeout(timeoutId);\r\n  };\r\n\r\n  let onClick = () => {\r\n    if (isCalculated) clear();\r\n    setDrawing(true);\r\n    clearTimer();\r\n  };\r\n\r\n  let onMove = () => {\r\n    if (isDrawing) clearTimer();\r\n  };\r\n\r\n  return (\r\n    <div style={{height: '100%', width: '100%'}}\r\n      onTouchMove={onMove}\r\n      onMouseMove={onMove}\r\n      onMouseDown={onClick}\r\n      onTouchStart={onClick}\r\n    >\r\n      {!isCalculated ? '' : (\r\n        <h3 className=\"h-100 d-flex justify-content-center align-items-center d-block\">{text}</h3>)}\r\n      <CanvasDraw\r\n        ref={canvasRef}\r\n        style={{\r\n          position: \"absolute\",\r\n          top: 0,\r\n          opacity: isCalculated ? 0 : 1\r\n        }}\r\n        onChange={onChange}\r\n        hideInterface={true}\r\n        immediateLoading={false}\r\n        canvasWidth={'100%'}\r\n        canvasHeight={'100%'}\r\n        lazyRadius={0}\r\n        hideGrid={true}\r\n        brushRadius={2}\r\n      />\r\n      \r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Top, CenterType, Right } from \"react-spaces\";\r\nexport default function Cell(props) {\r\n  return (\r\n    <Top\r\n      size={`${100 / 19}%`}\r\n      centerContent={CenterType.HorizontalVertical}\r\n      style={{ \r\n        borderRight: \"1px dotted rgba(172, 172, 172, 0.3)\",\r\n        borderBottom: \"1px dotted rgba(172, 172, 172, 0.3)\" \r\n      }}\r\n      trackSize={true}\r\n    >\r\n      {props.children \r\n        ? props.children.type\r\n          ? props.children \r\n          : props.as \r\n            ? <props.as>{props.children}</props.as>\r\n            : <h5 style={{ lineHeight: \"16px\" }}>{props.children}</h5>\r\n        : ''\r\n      }\r\n    </Top>\r\n  );\r\n}\r\n","import React, {useState, useEffect} from \"react\";\r\nimport { Left } from \"react-spaces\";\r\nimport Canvas from \"./Canvas\";\r\nimport Cell from \"./Cell\";\r\nimport * as Fa from 'react-icons/fa';\r\n\r\nexport default function Col(props) {\r\n  const [name, setName] = useState()\r\n  const [numRows, setNumRows] = useState(new Array(6).fill(0))\r\n  const [numRows2, setNumRows2] = useState(new Array(7).fill(0))\r\n\r\n  useEffect(() => {\r\n    props.setScore && props.setScore(numRows.reduce((a, b) => a + b, 0) + (numRows.reduce((a, b) => a + b, 0) > 62 ? 35 : 0) + numRows2.reduce((a, b) => a + b, 0))\r\n  }, [numRows, numRows2])\r\n\r\n  return (\r\n    <Left size={\"70px\"}>\r\n      {props.isWinner ? <Fa.FaHeart size={8} color=\"red\" style={{\r\n        marginTop: \"-15px\",\r\n        marginLeft: \"55px\"\r\n      }} className=\"sticky-top\"/> : \"\"}\r\n      <Cell><Canvas free onChange={(n) => {setName(n); props.setName(n)}}/></Cell>\r\n      {[...Array(6).keys()].map((i) => (\r\n        <Cell><Canvas onChange={value => setNumRows(numRows.map((num, i2) => i2 == i ? value : num))}/></Cell>\r\n      ))}\r\n      <Cell as=\"h3\">{numRows.reduce((a, b) => a + b, 0)}</Cell>\r\n      <Cell as=\"h3\">{numRows.reduce((a, b) => a + b, 0) > 62 ? 35 : 0}</Cell>\r\n      <Cell as=\"h3\">{numRows.reduce((a, b) => a + b, 0) + (numRows.reduce((a, b) => a + b, 0) > 62 ? 35 : 0)}</Cell>\r\n      \r\n      {[...Array(7).keys()].map((i) => (\r\n        <Cell><Canvas onChange={value => setNumRows2(numRows2.map((num, i2) => i2 == i ? value : num))}\r\n        value={(() => {\r\n          switch (i) {\r\n            case 0: return undefined\r\n            case 1: return 30\r\n            case 2: return 40\r\n            case 3: return 25\r\n            case 4: return undefined\r\n            case 5: return 50\r\n            case 6: return undefined\r\n          }\r\n        })()}/></Cell>\r\n      ))}\r\n      <Cell as=\"h3\">{numRows2.reduce((a, b) => a + b, 0)}</Cell>\r\n      <Cell as=\"h3\">{numRows.reduce((a, b) => a + b, 0) + (numRows.reduce((a, b) => a + b, 0) > 62 ? 35 : 0) + numRows2.reduce((a, b) => a + b, 0)}</Cell>\r\n    </Left>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Fill, Left, Right } from \"react-spaces\";\r\nimport Cell from \"./Cell\";\r\n\r\nexport default function FirstCol() {\r\n  return (\r\n    <Left size={\"120px\"}>\r\n      <Fill>\r\n        <Cell/>\r\n        {[...Array(6).keys()].map((i) => (\r\n          <Cell as='h3'>{i + 1}</Cell>\r\n        ))}\r\n        <Cell>Total</Cell>\r\n        <Cell>Bonus</Cell>\r\n        <Cell>Sous-total</Cell>\r\n        <Cell>Brelan</Cell>\r\n        <Cell>Petite suite</Cell>\r\n        <Cell>Grande suite</Cell>\r\n        <Cell>Full</Cell>\r\n        <Cell>Carré</Cell>\r\n        <Cell>Yams</Cell>\r\n        <Cell>Chance</Cell>\r\n        <Cell>Sous-total</Cell>\r\n        <Cell>Total</Cell>\r\n        <Cell/>\r\n      </Fill>\r\n      <Right size={3} style={{\r\n        borderRight: '1px solid #FF000050',\r\n        borderLeft: '1px solid #FF000050'\r\n      }}/>\r\n    </Left>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Left, Fill, CenterType } from \"react-spaces\";\r\nimport Cell from \"./Cell\";\r\nimport { Divider } from 'antd';\r\n\r\nexport default function FirstCol(props) {\r\n  return (\r\n      <Fill onClick={props.onClick}>\r\n        <Left size=\"40px\" className=\"addColumn\" centerContent={CenterType.HorizontalVertical}>\r\n            <span style={{fontFamily: \"arial\"}}>+</span>\r\n            <div/>\r\n        </Left>\r\n        <Fill></Fill>\r\n    </Fill>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\nimport \"./styles.scss\";\nimport \"antd/dist/antd.css\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport { ViewPort } from \"react-spaces\";\nimport Col from \"./Col\";\nimport FirstCol from \"./FirstCol\";\nimport LastCol from \"./LastCol\";\n\nexport default function App() {\n  let [players, setPlayers] = useState(Array(2).fill({name: \"\", score: 0}));\n  return (\n    <div className=\"App\">\n      <ViewPort className=\"papers\">\n        <FirstCol />\n        {players.map((n, i) => (\n          <Col key={i}\n            setScore={score => setPlayers(players.map((p, pi) => pi === i ? {...p, score: score} : p))} \n            setName={name => setPlayers(players.map((p, pi) => pi === i ? {...p, name: name} : p))}\n            isWinner={players[i].score === Math.max(...players.map(p => p.score))}\n          />\n        ))}\n        <LastCol onClick={() => setPlayers([...players, {name: \"\", score: 0}])}/>\n      </ViewPort>\n    </div>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  rootElement\n);\n"],"sourceRoot":""}