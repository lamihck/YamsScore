{"version":3,"sources":["Canvas.js","Cell.js","Col.js","FirstCol.js","LastCol.js","App.js","index.js"],"names":["Canvas","props","useState","isCalculated","setCalculated","isDrawing","setDrawing","timeoutId","setTimeoutId","canvasRef","useRef","isDrawingRef","current","useEffect","console","log","clear","ocr","canvas","recognize","drawing","then","data","text","clearText","writeText","onChange","toInt","image","langs","options","a","worker","Tesseract","createWorker","load","loadLanguage","initialize","setParameters","tessedit_char_whitelist","value","free","finally","terminate","replace","trim","ctx","Object","assign","getContext","font","textBaseline","txtWidth","measureText","width","fillText","height","isNaN","parseInt","clearTimer","clearTimeout","onClick","onMove","style","onTouchMove","onMouseMove","onMouseDown","onTouchStart","ref","setTimeout","hideInterface","immediateLoading","canvasWidth","canvasHeight","lazyRadius","hideGrid","brushRadius","Cell","size","centerContent","CenterType","HorizontalVertical","borderRight","borderBottom","trackSize","children","type","as","lineHeight","Col","setName","Array","fill","numRows","setNumRows","numRows2","setNumRows2","setScore","reduce","b","n","keys","map","i","num","i2","FirstCol","className","App","name","score","players","setPlayers","key","p","pi","isWinner","Math","max","rootElement","document","getElementById","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.fe0f75b0.chunk.js","sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\r\nimport CanvasDraw from \"react-canvas-draw\";\r\nimport Tesseract from \"tesseract.js\";\r\n\r\nexport default function Canvas(props) {\r\n  const [isCalculated, setCalculated] = useState(false);\r\n  const [isDrawing, setDrawing] = useState(false);\r\n  const [timeoutId, setTimeoutId] = useState();\r\n  const canvasRef = useRef(null);\r\n\r\n  const isDrawingRef = useRef(isDrawing);\r\n  isDrawingRef.current = isDrawing;\r\n\r\n  var _isDrawing = () => isDrawing.toString()\r\n  useEffect(() => {\r\n    console.log('isDrawing', isDrawing)\r\n  }, [isDrawing]);\r\n\r\n  let clear = () => {\r\n    canvasRef.current && canvasRef.current.clear();\r\n    setCalculated(false);\r\n  };\r\n\r\n  let ocr = () => {\r\n    let canvas = canvasRef.current && canvasRef.current.canvas;\r\n    recognize(canvas.drawing).then(({ data }) => {\r\n      if(!isDrawingRef.current){\r\n        let text = clearText(data.text)\r\n        writeText(text)      \r\n        setCalculated(true);\r\n        if (props.onChange) {\r\n          props.onChange(toInt(text));\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  let recognize = async (image, langs, options) => {\r\n    const worker = Tesseract.createWorker(options);\r\n    await worker.load();\r\n    await worker.loadLanguage(langs);\r\n    await worker.initialize(langs);\r\n    await worker.setParameters({\r\n      tessedit_char_whitelist: props.value \r\n        ? \"VX/\\\\\" \r\n        : props.free \r\n          ? \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\"\r\n          : \"0123456789/\\\\\"\r\n    });\r\n    return worker.recognize(image).finally(async () => {\r\n      await worker.terminate();\r\n    });\r\n  };\r\n\r\n  let clearText = (text) => {\r\n    if(props.free) return text\r\n    return text\r\n      .replace(\"V\", props.value)\r\n      .replace(\"/\", 0)\r\n      .replace(\"\\\\\", 0)\r\n      .replace(\"X\", props.value)\r\n      .trim();\r\n  }\r\n  \r\n  let writeText = (text) => {\r\n    clear();\r\n    let canvas = canvasRef.current.canvas.drawing;\r\n    let ctx = Object.assign(canvas.getContext(\"2d\"), {\r\n      font: \"30px sans-serif\",\r\n      textBaseline: \"middle\"\r\n    });\r\n    let txtWidth = ctx.measureText(text).width\r\n    ctx.fillText(text, (canvas.width/2)-(txtWidth/2), canvas.height / 2);\r\n  }\r\n\r\n  let toInt = (text) => {\r\n    return isNaN(parseInt(text)) ? 0 : parseInt(text)\r\n  }\r\n\r\n  let onChange = () => {\r\n    setDrawing(false)\r\n    clearTimer();\r\n    setTimeoutId(setTimeout(ocr, 400));    \r\n  };\r\n\r\n  let clearTimer = () => {\r\n    clearTimeout(timeoutId);\r\n  };\r\n\r\n  let onClick = () => {\r\n    if (isCalculated) clear();\r\n    setDrawing(true);\r\n    clearTimer();\r\n  };\r\n\r\n  let onMove = () => {\r\n    if (isDrawing) clearTimer();\r\n  };\r\n\r\n  return (\r\n    <div style={{height: '100%', width: '100%'}}\r\n      onTouchMove={onMove}\r\n      onMouseMove={onMove}\r\n      onMouseDown={onClick}\r\n      onTouchStart={onClick}\r\n    >\r\n      <CanvasDraw\r\n        ref={canvasRef}\r\n        onChange={onChange}\r\n        hideInterface={true}\r\n        immediateLoading={false}\r\n        canvasWidth={'100%'}\r\n        canvasHeight={'100%'}\r\n        lazyRadius={0}\r\n        hideGrid={true}\r\n        brushRadius={2}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Top, CenterType, Right } from \"react-spaces\";\r\nexport default function Cell(props) {\r\n  return (\r\n    <Top\r\n      size={`${100 / 19}%`}\r\n      centerContent={CenterType.HorizontalVertical}\r\n      style={{ \r\n        borderRight: \"1px solid  rgba(172, 172, 172, 0.3)\",\r\n        borderBottom: \"1px solid  rgba(172, 172, 172, 0.3)\" \r\n      }}\r\n      trackSize={true}\r\n    >\r\n      {props.children \r\n        ? props.children.type\r\n          ? props.children \r\n          : props.as \r\n            ? <props.as>{props.children}</props.as>\r\n            : <h5 style={{ lineHeight: \"16px\" }}>{props.children}</h5>\r\n        : ''\r\n      }\r\n    </Top>\r\n  );\r\n}\r\n","import React, {useState, useEffect} from \"react\";\r\nimport { Left } from \"react-spaces\";\r\nimport Canvas from \"./Canvas\";\r\nimport Cell from \"./Cell\";\r\n\r\nexport default function Col(props) {\r\n  const [name, setName] = useState()\r\n  const [numRows, setNumRows] = useState(new Array(6).fill(0))\r\n  const [numRows2, setNumRows2] = useState(new Array(7).fill(0))\r\n\r\n  useEffect(() => {\r\n    props.setScore && props.setScore(numRows.reduce((a, b) => a + b, 0) + (numRows.reduce((a, b) => a + b, 0) > 62 ? 35 : 0) + numRows2.reduce((a, b) => a + b, 0))\r\n  }, [numRows, numRows2])\r\n\r\n  return (\r\n    <Left size={\"60px\"}>\r\n      <Cell><Canvas free onChange={(n) => {setName(n); props.setName(n)}}/></Cell>\r\n      {[...Array(6).keys()].map((i) => (\r\n        <Cell><Canvas onChange={value => setNumRows(numRows.map((num, i2) => i2 == i ? value : num))}/></Cell>\r\n      ))}\r\n      <Cell>{numRows.reduce((a, b) => a + b, 0)}</Cell>\r\n      <Cell>{numRows.reduce((a, b) => a + b, 0) > 62 ? 35 : 0}</Cell>\r\n      <Cell>{numRows.reduce((a, b) => a + b, 0) + (numRows.reduce((a, b) => a + b, 0) > 62 ? 35 : 0)}</Cell>\r\n      \r\n      {[...Array(7).keys()].map((i) => (\r\n        <Cell><Canvas onChange={value => setNumRows2(numRows2.map((num, i2) => i2 == i ? value : num))}\r\n        value={(() => {\r\n          switch (i) {\r\n            case 0: return undefined\r\n            case 1: return 30\r\n            case 2: return 40\r\n            case 3: return 25\r\n            case 4: return undefined\r\n            case 5: return 50\r\n            case 6: return undefined\r\n          }\r\n        })()}/></Cell>\r\n      ))}\r\n      <Cell>{numRows2.reduce((a, b) => a + b, 0)}</Cell>\r\n      <Cell>{numRows.reduce((a, b) => a + b, 0) + (numRows.reduce((a, b) => a + b, 0) > 62 ? 35 : 0) + numRows2.reduce((a, b) => a + b, 0)}</Cell>\r\n      \r\n    </Left>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Left } from \"react-spaces\";\r\nimport Cell from \"./Cell\";\r\n\r\nexport default function FirstCol() {\r\n  return (\r\n    <Left size={\"120px\"}>\r\n      <Cell/>\r\n      {[...Array(6).keys()].map((i) => (\r\n        <Cell as='h3'>{i + 1}</Cell>\r\n      ))}\r\n      <Cell>Total</Cell>\r\n      <Cell>Bonus</Cell>\r\n      <Cell>Sous-total</Cell>\r\n      <Cell>Brelan</Cell>\r\n      <Cell>Petite suite</Cell>\r\n      <Cell>Grande suite</Cell>\r\n      <Cell>Full</Cell>\r\n      <Cell>Carré</Cell>\r\n      <Cell>Yams</Cell>\r\n      <Cell>Chance</Cell>\r\n      <Cell>Sous-total</Cell>\r\n      <Cell>Total</Cell>\r\n    </Left>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Left, Fill, CenterType } from \"react-spaces\";\r\nimport Cell from \"./Cell\";\r\nimport { Divider } from 'antd';\r\n\r\nexport default function FirstCol(props) {\r\n  return (\r\n      <Fill onClick={props.onClick}>\r\n        <Left size=\"40px\" className=\"addColumn\" centerContent={CenterType.HorizontalVertical}>\r\n            <span>+</span>\r\n            <div/>\r\n        </Left>\r\n        <Fill></Fill>\r\n    </Fill>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\nimport \"./styles.scss\";\nimport \"antd/dist/antd.css\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport { ViewPort } from \"react-spaces\";\nimport Col from \"./Col\";\nimport FirstCol from \"./FirstCol\";\nimport LastCol from \"./LastCol\";\n\nexport default function App() {\n  let [players, setPlayers] = useState(Array(2).fill({name: \"\", score: 0}));\n  return (\n    <div className=\"App\">\n      <ViewPort>\n        <FirstCol />\n        {players.map((n, i) => (\n          <Col key={i}\n            setScore={score => setPlayers(players.map((p, pi) => pi === i ? {...p, score: score} : p))} \n            setName={name => setPlayers(players.map((p, pi) => pi === i ? {...p, name: name} : p))}\n            isWinner={players[i].score === Math.max(players.map(p => p.score))}\n          />\n        ))}\n        <LastCol onClick={() => setPlayers([...players, {name: \"\", score: 0}])}/>\n      </ViewPort>\n    </div>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  rootElement\n);\n"],"sourceRoot":""}