{"version":3,"sources":["Canvas.js","Cell.js","Col.js","FirstCol.js","LastCol.js","App.js","index.js"],"names":["Canvas","props","useState","isCalculated","setCalculated","isDrawing","setDrawing","timeoutId","setTimeoutId","canvasRef","useRef","clear","current","ocr","canvas","recognize","drawing","then","data","text","clearText","writeText","onChange","toInt","image","langs","options","a","worker","Tesseract","createWorker","load","loadLanguage","initialize","setParameters","tessedit_char_whitelist","value","finally","terminate","replace","trim","ctx","Object","assign","getContext","font","textBaseline","txtWidth","measureText","width","fillText","height","isNaN","parseInt","clearTimer","clearTimeout","onClick","onMove","style","onTouchMove","onMouseMove","onMouseDown","onTouchStart","ref","setTimeout","immediateLoading","hideInterface","canvasWidth","canvasHeight","lazyRadius","hideGrid","brushRadius","Cell","size","centerContent","CenterType","HorizontalVertical","borderRight","borderBottom","trackSize","children","type","as","lineHeight","Col","Array","fill","numRows","setNumRows","numRows2","setNumRows2","keys","map","i","num","i2","reduce","b","FirstCol","className","App","players","setPlayers","rootElement","document","getElementById","ReactDOM","render","StrictMode"],"mappings":"+RAIe,SAASA,EAAOC,GAAQ,MAAD,EACEC,oBAAS,GADX,mBAC7BC,EAD6B,KACfC,EADe,OAEJF,oBAAS,GAFL,mBAE7BG,EAF6B,KAElBC,EAFkB,OAGFJ,qBAHE,mBAG7BK,EAH6B,KAGlBC,EAHkB,KAI9BC,EAAYC,iBAAO,MAEzB,IAAIC,EAAQ,KACVF,EAAUG,SAAWH,EAAUG,QAAQD,QACvCP,GAAc,IAEZS,EAAM,KACR,IAAIC,EAASL,EAAUG,SAAWH,EAAUG,QAAQE,OACpDC,EAAUD,EAAOE,SAASC,KAAK,EAAGC,WAChCP,IACA,IAAIQ,EAAOC,EAAUF,EAAKC,MAC1BE,EAAUF,GACVf,GAAc,GACVH,EAAMqB,UACRrB,EAAMqB,SAASC,EAAMJ,OAIvBJ,EAAS,uCAAG,WAAOS,EAAOC,EAAOC,GAArB,eAAAC,EAAA,6DACRC,EAASC,IAAUC,aAAaJ,GADxB,SAERE,EAAOG,OAFC,uBAGRH,EAAOI,aAAaP,GAHZ,uBAIRG,EAAOK,WAAWR,GAJV,uBAKRG,EAAOM,cAAc,CACzBC,wBAAyBlC,EAAMmC,MAAQ,QAAU,kBANrC,gCAQPR,EAAOb,UAAUS,GAAOa,QAAxB,sBAAgC,sBAAAV,EAAA,sEAC/BC,EAAOU,YADwB,6CARzB,4CAAH,0DAaTlB,EAAaD,GACRA,EACJoB,QAAQ,IAAKtC,EAAMmC,OACnBG,QAAQ,IAAK,GACbA,QAAQ,KAAM,GACdA,QAAQ,IAAKtC,EAAMmC,OACnBI,OAGDnB,EAAaF,IACf,IAAIL,EAASL,EAAUG,QAAQE,OAAOE,QAClCyB,EAAMC,OAAOC,OAAO7B,EAAO8B,WAAW,MAAO,CAC/CC,KAAM,kBACNC,aAAc,WAEZC,EAAWN,EAAIO,YAAY7B,GAAM8B,MACrCR,EAAIS,SAAS/B,EAAOL,EAAOmC,MAAM,EAAIF,EAAS,EAAIjC,EAAOqC,OAAO,IAG9D5B,EAASJ,GACJiC,MAAMC,SAASlC,IAAS,EAAIkC,SAASlC,GAQ1CmC,EAAa,KACfC,aAAahD,IAEXiD,EAAU,KACRrD,GAAcQ,IAClBL,GAAW,GACXgD,KAEEG,EAAS,KACPpD,GAAWiD,KAEjB,OACE,yBAAKI,MAAO,CAACP,OAAQ,OAAQF,MAAO,QAClCU,YAAaF,EACbG,YAAaH,EACbI,YAAaL,EACbM,aAAcN,GAEd,kBAAC,IAAD,CACEO,IAAKtD,EACLa,SAzBS,KACbhB,GAAW,GACXgD,IACA9C,EAAawD,WAAWnD,EAAK,OAuBzBoD,kBAAkB,EAClBC,eAAe,EACfC,YAAa,OACbC,aAAc,OACdC,WAAY,EACZC,UAAU,EACVC,YAAa,KC5FN,SAASC,EAAKvE,GAC3B,OACE,kBAAC,IAAD,CACEwE,KAAI,UAAK,IAAM,GAAX,KACJC,cAAeC,IAAWC,mBAC1BlB,MAAO,CACLmB,YAAa,sCACbC,aAAc,uCAEhBC,WAAW,GAEV9E,EAAM+E,SAASC,KACZhF,EAAM+E,SACN/E,EAAMiF,GACJ,kBAACjF,EAAMiF,GAAP,KAAWjF,EAAM+E,UACjB,wBAAItB,MAAO,CAAEyB,WAAY,SAAWlF,EAAM+E,WCZvC,SAASI,IAAO,MAAD,EACElF,mBAAS,IAAImF,MAAM,GAAGC,KAAK,IAD7B,mBACrBC,EADqB,KACZC,EADY,OAEItF,mBAAS,IAAImF,MAAM,GAAGC,KAAK,IAF/B,mBAErBG,EAFqB,KAEXC,EAFW,KAI5B,OACE,kBAAC,IAAD,CAAMjB,KAAM,QACT,IAAIY,MAAM,GAAGM,QAAQC,IAAKC,GACzB,kBAACrB,EAAD,KAAM,kBAACxE,EAAD,CAAQsB,SAAUc,GAASoD,EAAWD,EAAQK,IAAI,CAACE,EAAKC,IAAOA,GAAMF,EAAIzD,EAAQ0D,QAEzF,kBAACtB,EAAD,KAAOe,EAAQS,OAAO,CAACrE,EAAGsE,IAAMtE,EAAIsE,EAAG,IACvC,kBAACzB,EAAD,KAAOe,EAAQS,OAAO,CAACrE,EAAGsE,IAAMtE,EAAIsE,EAAG,GAAK,GAAK,GAAK,GACtD,kBAACzB,EAAD,KAAOe,EAAQS,OAAO,CAACrE,EAAGsE,IAAMtE,EAAIsE,EAAG,IAAMV,EAAQS,OAAO,CAACrE,EAAGsE,IAAMtE,EAAIsE,EAAG,GAAK,GAAK,GAAK,IAE3F,IAAIZ,MAAM,GAAGM,QAAQC,IAAKC,GACzB,kBAACrB,EAAD,KAAM,kBAACxE,EAAD,CAAQsB,SAAUc,GAASsD,EAAYD,EAASG,IAAI,CAACE,EAAKC,IAAOA,GAAMF,EAAIzD,EAAQ0D,IACzF1D,MAAO,MACL,OAAQyD,GACN,KAAK,EAAG,OACR,KAAK,EAAG,OAAO,GACf,KAAK,EAAG,OAAO,GACf,KAAK,EAAG,OAAO,GACf,KAAK,EAAG,OACR,KAAK,EAAG,OAAO,GACf,KAAK,EAAG,SARL,OAYT,kBAACrB,EAAD,KAAOiB,EAASO,OAAO,CAACrE,EAAGsE,IAAMtE,EAAIsE,EAAG,IACxC,kBAACzB,EAAD,KAAOe,EAAQS,OAAO,CAACrE,EAAGsE,IAAMtE,EAAIsE,EAAG,IAAMV,EAAQS,OAAO,CAACrE,EAAGsE,IAAMtE,EAAIsE,EAAG,GAAK,GAAK,GAAK,GAAKR,EAASO,OAAO,CAACrE,EAAGsE,IAAMtE,EAAIsE,EAAG,KC7BzH,SAASC,IACtB,OACE,kBAAC,IAAD,CAAMzB,KAAM,SACT,IAAIY,MAAM,GAAGM,QAAQC,IAAKC,GACzB,kBAACrB,EAAD,CAAMU,GAAG,MAAMW,EAAI,IAErB,kBAACrB,EAAD,cACA,kBAACA,EAAD,cACA,kBAACA,EAAD,mBACA,kBAACA,EAAD,eACA,kBAACA,EAAD,qBACA,kBAACA,EAAD,qBACA,kBAACA,EAAD,aACA,kBAACA,EAAD,iBACA,kBAACA,EAAD,aACA,kBAACA,EAAD,eACA,kBAACA,EAAD,mBACA,kBAACA,EAAD,eChBS,SAAS0B,EAASjG,GAC/B,OACI,kBAAC,IAAD,CAAMuD,QAASvD,EAAMuD,SACnB,kBAAC,IAAD,CAAMiB,KAAK,OAAO0B,UAAU,YAAYzB,cAAeC,IAAWC,oBAC9D,mCACA,+BAEJ,kBAAC,IAAD,OCHO,SAASwB,IAAO,IAAD,EACAlG,mBAAS,GADT,mBACvBmG,EADuB,KACdC,EADc,KAE5B,OACE,yBAAKH,UAAU,OACb,kBAAC,IAAD,KACE,kBAACD,EAAD,MACC,IAAIb,MAAMgB,IAAUT,IAAI,IAAM,kBAACR,EAAD,OAC/B,kBAAC,EAAD,CAAS5B,QAAS,IAAM8C,EAAWD,EAAQ,OCXnD,MAAME,EAAcC,SAASC,eAAe,QAC5CC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAACR,EAAD,OAEFG,K","file":"static/js/main.92b3c52f.chunk.js","sourcesContent":["import React, { useState, useRef } from \"react\";\r\nimport CanvasDraw from \"react-canvas-draw\";\r\nimport Tesseract from \"tesseract.js\";\r\n\r\nexport default function Canvas(props) {\r\n  const [isCalculated, setCalculated] = useState(false);\r\n  const [isDrawing, setDrawing] = useState(false);\r\n  const [timeoutId, setTimeoutId] = useState();\r\n  const canvasRef = useRef(null);\r\n\r\n  let clear = () => {\r\n    canvasRef.current && canvasRef.current.clear();\r\n    setCalculated(false);\r\n  };\r\n  let ocr = () => {\r\n    let canvas = canvasRef.current && canvasRef.current.canvas;\r\n    recognize(canvas.drawing).then(({ data }) => {\r\n      clear();\r\n      let text = clearText(data.text)\r\n      writeText(text)      \r\n      setCalculated(true);\r\n      if (props.onChange) {\r\n        props.onChange(toInt(text));\r\n      }\r\n    });\r\n  };\r\n  let recognize = async (image, langs, options) => {\r\n    const worker = Tesseract.createWorker(options);\r\n    await worker.load();\r\n    await worker.loadLanguage(langs);\r\n    await worker.initialize(langs);\r\n    await worker.setParameters({\r\n      tessedit_char_whitelist: props.value ? \"VX/\\\\\" : \"0123456789/\\\\\"\r\n    });\r\n    return worker.recognize(image).finally(async () => {\r\n      await worker.terminate();\r\n    });\r\n  };\r\n\r\n  let clearText = (text) => {\r\n    return text\r\n      .replace(\"V\", props.value)\r\n      .replace(\"/\", 0)\r\n      .replace(\"\\\\\", 0)\r\n      .replace(\"X\", props.value)\r\n      .trim();\r\n  }\r\n  \r\n  let writeText = (text) => {\r\n    let canvas = canvasRef.current.canvas.drawing;\r\n    let ctx = Object.assign(canvas.getContext(\"2d\"), {\r\n      font: \"30px sans-serif\",\r\n      textBaseline: \"middle\"\r\n    });\r\n    let txtWidth = ctx.measureText(text).width\r\n    ctx.fillText(text, (canvas.width/2)-(txtWidth/2), canvas.height/2);\r\n  }\r\n\r\n  let toInt = (text) => {\r\n    return isNaN(parseInt(text)) ? 0 : parseInt(text)\r\n  }\r\n\r\n  let onChange = () => {\r\n    setDrawing(false)\r\n    clearTimer();\r\n    setTimeoutId(setTimeout(ocr, 600));\r\n  };\r\n  let clearTimer = () => {\r\n    clearTimeout(timeoutId);\r\n  };\r\n  let onClick = () => {\r\n    if (isCalculated) clear();\r\n    setDrawing(true);\r\n    clearTimer();\r\n  };\r\n  let onMove = () => {\r\n    if (isDrawing) clearTimer();\r\n  };\r\n  return (\r\n    <div style={{height: '100%', width: '100%'}}\r\n      onTouchMove={onMove}\r\n      onMouseMove={onMove}\r\n      onMouseDown={onClick}\r\n      onTouchStart={onClick}\r\n    >\r\n      <CanvasDraw\r\n        ref={canvasRef}\r\n        onChange={onChange}\r\n        immediateLoading={false}\r\n        hideInterface={true}\r\n        canvasWidth={'100%'}\r\n        canvasHeight={'100%'}\r\n        lazyRadius={0}\r\n        hideGrid={true}\r\n        brushRadius={2}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Top, CenterType, Right } from \"react-spaces\";\r\nexport default function Cell(props) {\r\n  return (\r\n    <Top\r\n      size={`${100 / 18}%`}\r\n      centerContent={CenterType.HorizontalVertical}\r\n      style={{ \r\n        borderRight: \"1px solid  rgba(172, 172, 172, 0.3)\",\r\n        borderBottom: \"1px solid  rgba(172, 172, 172, 0.3)\" \r\n      }}\r\n      trackSize={true}\r\n    >\r\n      {props.children.type \r\n        ? props.children \r\n        : props.as \r\n          ? <props.as>{props.children}</props.as>\r\n          : <h5 style={{ lineHeight: \"16px\" }}>{props.children}</h5>\r\n      }\r\n    </Top>\r\n  );\r\n}\r\n","import React, {useState} from \"react\";\r\nimport { Left } from \"react-spaces\";\r\nimport Canvas from \"./Canvas\";\r\nimport Cell from \"./Cell\";\r\n\r\nexport default function Col() {\r\n  const [numRows, setNumRows] = useState(new Array(6).fill(0))\r\n  const [numRows2, setNumRows2] = useState(new Array(7).fill(0))\r\n\r\n  return (\r\n    <Left size={\"60px\"}>\r\n      {[...Array(6).keys()].map((i) => (\r\n        <Cell><Canvas onChange={value => setNumRows(numRows.map((num, i2) => i2 == i ? value : num))}/></Cell>\r\n      ))}\r\n      <Cell>{numRows.reduce((a, b) => a + b, 0)}</Cell>\r\n      <Cell>{numRows.reduce((a, b) => a + b, 0) > 62 ? 35 : 0}</Cell>\r\n      <Cell>{numRows.reduce((a, b) => a + b, 0) + (numRows.reduce((a, b) => a + b, 0) > 62 ? 35 : 0)}</Cell>\r\n      \r\n      {[...Array(7).keys()].map((i) => (\r\n        <Cell><Canvas onChange={value => setNumRows2(numRows2.map((num, i2) => i2 == i ? value : num))}\r\n        value={(() => {\r\n          switch (i) {\r\n            case 0: return undefined\r\n            case 1: return 30\r\n            case 2: return 40\r\n            case 3: return 25\r\n            case 4: return undefined\r\n            case 5: return 50\r\n            case 6: return undefined\r\n          }\r\n        })()}/></Cell>\r\n      ))}\r\n      <Cell>{numRows2.reduce((a, b) => a + b, 0)}</Cell>\r\n      <Cell>{numRows.reduce((a, b) => a + b, 0) + (numRows.reduce((a, b) => a + b, 0) > 62 ? 35 : 0) + numRows2.reduce((a, b) => a + b, 0)}</Cell>\r\n    </Left>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Left } from \"react-spaces\";\r\nimport Cell from \"./Cell\";\r\n\r\nexport default function FirstCol() {\r\n  return (\r\n    <Left size={\"120px\"}>\r\n      {[...Array(6).keys()].map((i) => (\r\n        <Cell as='h3'>{i + 1}</Cell>\r\n      ))}\r\n      <Cell>Total</Cell>\r\n      <Cell>Bonus</Cell>\r\n      <Cell>Sous-total</Cell>\r\n      <Cell>Brelan</Cell>\r\n      <Cell>Petite suite</Cell>\r\n      <Cell>Grande suite</Cell>\r\n      <Cell>Full</Cell>\r\n      <Cell>Carré</Cell>\r\n      <Cell>Yams</Cell>\r\n      <Cell>Chance</Cell>\r\n      <Cell>Sous-total</Cell>\r\n      <Cell>Total</Cell>\r\n    </Left>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Left, Fill, CenterType } from \"react-spaces\";\r\nimport Cell from \"./Cell\";\r\nimport { Divider } from 'antd';\r\n\r\nexport default function FirstCol(props) {\r\n  return (\r\n      <Fill onClick={props.onClick}>\r\n        <Left size=\"40px\" className=\"addColumn\" centerContent={CenterType.HorizontalVertical}>\r\n            <span>+</span>\r\n            <div/>\r\n        </Left>\r\n        <Fill></Fill>\r\n    </Fill>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\nimport \"./styles.scss\";\nimport \"antd/dist/antd.css\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport { ViewPort } from \"react-spaces\";\nimport Col from \"./Col\";\nimport FirstCol from \"./FirstCol\";\nimport LastCol from \"./LastCol\";\n\nexport default function App() {\n  let [players, setPlayers] = useState(2);\n  return (\n    <div className=\"App\">\n      <ViewPort>\n        <FirstCol />\n        {[...Array(players)].map(() => <Col/>)}\n        <LastCol onClick={() => setPlayers(players+1)}/>\n      </ViewPort>\n    </div>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  rootElement\n);\n"],"sourceRoot":""}